\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+cp}{\PYZsh{}}\PY{c+cp}{define kmalloc(x, y)}                           \PYZbs{}
\PY{p}{(}\PY{p}{\PYZob{}}                                              \PYZbs{}
    \PY{k+kt}{void} \PY{o}{*}\PY{n}{\PYZus{}\PYZus{}\PYZus{}retval}\PY{p}{;}                            \PYZbs{}
    \PY{n}{intoverflow\PYZus{}t} \PY{n}{\PYZus{}\PYZus{}\PYZus{}x} \PY{o}{=} \PY{p}{(}\PY{n}{intoverflow\PYZus{}t}\PY{p}{)}\PY{n}{x}\PY{p}{;}      \PYZbs{}
    \PY{k}{if} \PY{p}{(}\PY{n}{WARN}\PY{p}{(}\PY{n}{\PYZus{}\PYZus{}\PYZus{}x} \PY{o}{>} \PY{n}{ULONG\PYZus{}MAX}\PY{p}{,} \PY{l+s}{"}\PY{l+s}{overflow}\PY{l+s+se}{\PYZbs{}n}\PY{l+s}{"}\PY{p}{)}\PY{p}{)}   \PYZbs{}
        \PY{n}{\PYZus{}\PYZus{}\PYZus{}retval} \PY{o}{=} \PY{n+nb}{NULL}\PY{p}{;}                       \PYZbs{}
    \PY{k}{else}                                        \PYZbs{}
        \PY{n}{\PYZus{}\PYZus{}\PYZus{}retval} \PY{o}{=} \PY{n}{kmalloc}\PY{p}{(}\PY{p}{(}\PY{k+kt}{size\PYZus{}t}\PY{p}{)}\PY{n}{\PYZus{}\PYZus{}\PYZus{}x}\PY{p}{,} \PY{p}{(}\PY{n}{y}\PY{p}{)}\PY{p}{)}\PY{p}{;} \PYZbs{}
    \PY{n}{\PYZus{}\PYZus{}\PYZus{}retval}\PY{p}{;}                                  \PYZbs{}
\PY{p}{\PYZcb{}}\PY{p}{)}
\end{Verbatim}
