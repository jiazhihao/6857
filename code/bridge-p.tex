\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{if} \PY{p}{(}\PY{n}{maxnum} \PY{o}{>} \PY{n}{PAGE\PYZus{}SIZE} \PY{o}{/} \PY{k}{sizeof}\PY{p}{(}\PY{k}{struct} \PY{n}{\PYZus{}\PYZus{}fdb\PYZus{}entry}\PY{p}{)}\PY{p}{)}
    \PY{n}{maxnum} \PY{o}{=} \PY{n}{PAGE\PYZus{}SIZE} \PY{o}{/} \PY{k}{sizeof}\PY{p}{(}\PY{k}{struct} \PY{n}{\PYZus{}\PYZus{}fdb\PYZus{}entry}\PY{p}{)}\PY{p}{;}
\PY{n}{size} \PY{o}{=} \PY{n}{maxnum} \PY{o}{*} \PY{k}{sizeof}\PY{p}{(}\PY{k}{struct} \PY{n}{\PYZus{}\PYZus{}fdb\PYZus{}entry}\PY{p}{)}\PY{p}{;}
\PY{n}{buf} \PY{o}{=} \PY{n}{kmalloc}\PY{p}{(}\PY{n}{size}\PY{p}{,} \PY{n}{GFP\PYZus{}USER}\PY{p}{)}\PY{p}{;}
\PY{p}{.}\PY{p}{.}\PY{p}{.}
\end{Verbatim}
